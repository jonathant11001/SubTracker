import{a as w,r as s,j as t}from"./index-bw462Axr.js";import{T as v}from"./TopMainNav-CZtpJCps.js";import"./SubTrackerLogo-CvoR8IAR.js";const m=[{name:"Mint Breeze",backgroundColor:"linear-gradient(135deg, #E6FFFA 0%, #30E0C6 100%)",group:"Light",componentColor:"FFFFFF"},{name:"Sky Fade",backgroundColor:"linear-gradient(135deg, #F0F9FF 0%, #87CEEB 100%)",group:"Light",componentColor:"FFFFFF"},{name:"Sakura Bloom",backgroundColor:"linear-gradient(135deg, #FFF5F7 0%, #FFB7C5 100%)",group:"Light",componentColor:"FFFFFF"},{name:"Cyber Teal",backgroundColor:"linear-gradient(135deg, #0D0D0D 0%, #101820 50%, #30E0C6 100%)",group:"Dark",componentColor:"23272A"},{name:"Shadow Drift",backgroundColor:"linear-gradient(135deg, #1A1A1A 0%, #2D2D2D 50%, #101010 100%)",group:"Dark",componentColor:"23272A"},{name:"Neon Eclipse",backgroundColor:"linear-gradient(135deg, #242124 0%, #5A4FCF 100%)",group:"Dark",componentColor:"23272A"}],A=()=>{const c="https://subtracker-dp4j.onrender.com",{theme:n,setTheme:F,loading:k}=w(),[d,u]=s.useState(""),[r,h]=s.useState(null),[f,o]=s.useState(""),[i,p]=s.useState(""),[g,b]=s.useState();s.useEffect(()=>{if(n&&n.backgroundColor&&m.length>0){const e=m.find(a=>a.backgroundColor===n.backgroundColor);e&&h(e)}},[n]),s.useEffect(()=>{(async()=>{try{const a=localStorage.getItem("token"),l=await fetch(`${c}/api/users/me`,{headers:{Authorization:`Bearer ${a}`}}),C=await l.json();l.ok&&C.limit!==void 0&&b(C.limit)}catch{o("Failed to fetch limit.")}})()},[]),s.useEffect(()=>{r&&(async()=>{try{const a=localStorage.getItem("token");await fetch(`${c}/api/users/theme`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({backgroundColor:r.backgroundColor,componentColor:r.componentColor})})}catch{o("Failed to update background color.")}})()},[r]);const y=()=>{localStorage.removeItem("token"),window.location.href="/login"},j=async()=>{if(!d||d.length<6){o("Password must be at least 6 characters.");return}try{const e=localStorage.getItem("token"),a=await fetch(`${c}/api/users/password`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({password:d})}),l=await a.json();a.ok?(o("Password changed!"),u("")):o(l.error||"Failed to change password.")}catch{o("Failed to change password.")}},N=async()=>{if(!i||isNaN(Number(i))||Number(i)<0){o("Please enter a valid limit.");return}b(Number(i)),o("Limit changed!"),p("");try{const e=localStorage.getItem("token");await fetch(`${c}/api/users/limit`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({limit:Number(i)})})}catch{o("Failed to update limit on server.")}},x=e=>{h(e),o(`Background set to ${e.name}`),(async()=>{try{const l=localStorage.getItem("token");await fetch(`${c}/api/users/theme`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({backgroundColor:e.backgroundColor,componentColor:e.componentColor})}),F({backgroundColor:e.backgroundColor,componentColor:e.componentColor})}catch{o("Failed to update background color.")}})()};return k||!n?null:t.jsxs("div",{style:{minHeight:"100vh",background:n.backgroundColor,transition:"background 0.5s"},className:"text-white",children:[t.jsx(v,{}),t.jsxs("div",{className:"max-w-3xl mx-auto mt-10 rounded shadow-lg p-8",style:{background:n.componentColor==="FFFFFF"?"#FFFFFF":`#${n.componentColor}`,color:n.componentColor==="FFFFFF"?"#000":"#FFF"},children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Settings"}),t.jsx("button",{onClick:y,className:"bg-red-500 text-white px-6 py-2 rounded hover:bg-red-600 transition",children:"Logout"})]}),t.jsxs("div",{className:"mb-6 border-b border-gray-400 pb-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Change Password"}),t.jsxs("div",{className:"flex items-center space-x-2 text-black",children:[t.jsx("input",{type:"password",className:"bg-gray-200 px-4 py-2 rounded w-64",placeholder:"password",value:d,onChange:e=>u(e.target.value)}),t.jsx("button",{className:"bg-teal-400 text-black px-4 py-2 rounded font-semibold hover:bg-teal-500",onClick:j,children:"Change Password"})]})]}),t.jsxs("div",{className:"mb-6 border-b border-gray-400 pb-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Change Limit"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"number",className:"bg-gray-200 px-4 py-2 rounded w-64 text-black",placeholder:g!=null?g.toString():"Set your limit",value:i,onChange:e=>p(e.target.value)}),t.jsx("button",{className:"bg-teal-400 text-black px-4 py-2 rounded font-semibold hover:bg-teal-500",onClick:N,children:"Change Limit"})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Set Background Color"}),t.jsx("div",{className:"mb-2 font-semibold",children:"Light"}),t.jsx("div",{className:"flex flex-wrap gap-6 mb-6",children:m.filter(e=>e.group==="Light").map(e=>t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("button",{className:`w-24 h-12 rounded-lg border-2 mb-1 ${r&&r.name===e.name?"border-teal-400":"border-gray-300"}`,style:{background:e.backgroundColor},onClick:()=>x(e)}),t.jsx("span",{className:"text-xs text-center",children:e.name})]},e.name))}),t.jsx("div",{className:"mb-2 font-semibold",children:"Dark"}),t.jsx("div",{className:"flex flex-wrap gap-6",children:m.filter(e=>e.group==="Dark").map(e=>t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("button",{className:`w-24 h-12 rounded-lg border-2 mb-1 ${r&&r.name===e.name?"border-teal-400":"border-gray-300"}`,style:{background:e.backgroundColor},onClick:()=>x(e)}),t.jsx("span",{className:"text-xs text-center",children:e.name})]},e.name))})]}),t.jsx("span",{className:"text-green-600 font-semibold",children:f})]})]})};export{A as default};
